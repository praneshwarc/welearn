
<div class="card mb-2 card-course" id="course_{{ course.id }}">
    <a class="text-decoration-none text-dark" href="/tutor/courses/{{ course.id }}/modules">
        <div class="card-body card-course-body">
            <div class="row justify-content-end">
                <div class="col-sm">
                    <h5 class="card-title">{{ course.title }}</h5>
                </div>
                <div class="col-auto">
                    <div class="form-check form-switch">
                        <input onclick="toggleCourse('{{ course.id }}',event)" class="form-check-input" type="checkbox" role="switch" data-id="{{ course.id }}" id="is-published-{{ course.id }}" {% if course.is_published %} checked {% endif %}>
                    </div>
                </div>
            </div>
            <p class="card-text">{{ course.description }}</p>
            <div class="row justify-content-end mb-2">
                <div class="col-sm">
                        <span class="text-capitalize fw-light badge rounded-pill bg-tier-{{ course.tier }}"
                              data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="Requires {{ course.tier }} Tier">
                         {{ course.tier }}
                        </span>
                </div>
                <div class="col-auto fs-6 fw-light">
                    {{ course.hrs }} hrs {{ course.mins }} mins
                </div>
            </div>
        </div>
    </a>
    <div class="card-footer">
        <div class="row justify-content-end">
            <div class="col-auto">
                <button id="edit_course_{{ course.id }}"  class="btn btn-sm btn-outline-primary" onclick="editCourse('{{ course.id }}')"><i class="bi-pencil"></i></button>
            </div>
            <div class="col-auto">
                <button id="delete_course_{{ course.id }}" class="btn btn-sm btn-outline-danger" onclick="deleteCourse('{{ course.id }}')"><i class="bi-trash"></i></button>
            </div>
        </div>
    </div>
</div>
<script>

    function editCourse(course_id){
        alert('Editing course '+course_id);

    }

    function deleteCourse(course_id){
        const csrfToken = Cookies.get('csrftoken');
        $.ajax("/tutor/courses/"+course_id+"/",
        {
            method: "delete",
            headers: {
                'X-CSRFToken': csrfToken
            },
            success: function(response){
                location.reload();
            }
        });
    }

    function toggleCourse(course_id,event){
        const csrfToken = Cookies.get('csrftoken');
        const is_published = $(event.target).prop('checked');
        $.ajax("/tutor/courses/"+course_id+"/",
        {
            method: "post",
            headers: {
                'X-CSRFToken': csrfToken
            },
            data:{
                'is_published':is_published
            }
        });
    }

</script>
